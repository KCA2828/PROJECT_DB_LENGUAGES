ALTER SESSION SET "_ORACLE_SCRIPT"=TRUE;

-- Creación de la tabla PROVEEDOR
CREATE TABLE PROVEEDOR (
    ID_PROVEEDOR NUMBER PRIMARY KEY,
    NOMBRE VARCHAR2(50),
    DIRECCION VARCHAR2(100),
    CORREO VARCHAR2(100),
    TELEFONO VARCHAR2(20)
);

---- Creación de la tabla DEPARTAMENTO 
CREATE TABLE DEPARTAMENTO (
    ID_DEPARTAMENTO NUMBER PRIMARY KEY,
    NOMBRE VARCHAR2(100)
);

-- Creación de la tabla CLIENTE
CREATE TABLE CLIENTE (
    ID_CLIENTE NUMBER PRIMARY KEY,
    NOMBRE VARCHAR2(50),
    APELLIDO VARCHAR2(50),
    DIRECCION VARCHAR2(100),
    CORREO VARCHAR2(100),
    TELEFONO VARCHAR2(20)
);

-- Creación de la tabla ORDEN
CREATE TABLE ORDEN (
    ID_ORDEN NUMBER PRIMARY KEY,
    FECHA_ORDEN DATE,
    ESTADO_ORDEN VARCHAR2(50),
    ID_CLIENTE NUMBER,
    CONSTRAINT FK_ORDEN_CLIENTE FOREIGN KEY (ID_CLIENTE) REFERENCES CLIENTE(ID_CLIENTE)
);

-- Creación de la tabla EMPLEADO
CREATE TABLE EMPLEADO (
    ID_EMPLEADO NUMBER PRIMARY KEY,
    NOMBRE VARCHAR2(50),
    APELLIDO VARCHAR2(50),
    PUESTO VARCHAR2(50),
    SALARIO NUMBER,
    FECHA_CONTRATACION DATE,
    ID_DEPARTAMENTO NUMBER,
    CONSTRAINT FK_EMPLEADO_DEPARTAMENTO FOREIGN KEY (ID_DEPARTAMENTO) REFERENCES DEPARTAMENTO(ID_DEPARTAMENTO)
);

-- Creación de la tabla PRODUCTO
CREATE TABLE PRODUCTO (
    ID_PRODUCTO NUMBER PRIMARY KEY,
    NOMBRE VARCHAR2(50),
    PRECIO NUMBER,
    CANTIDAD NUMBER,
    FECHA_VENCIMIENTO DATE
);

-- Creación de la tabla COMPRA
CREATE TABLE COMPRA (
    ID_COMPRA NUMBER PRIMARY KEY,
    FECHA DATE,
    GANANCIA NUMBER,
    ID_CLIENTE NUMBER,
    CONSTRAINT FK_COMPRA_CLIENTE FOREIGN KEY (ID_CLIENTE) REFERENCES CLIENTE(ID_CLIENTE)
);

-- Creación de la tabla INGREDIENTE
CREATE TABLE INGREDIENTE (
    ID_INGREDIENTE NUMBER PRIMARY KEY,
    NOMBRE VARCHAR2(50),
    CANTIDAD NUMBER,
    PRECIO_UNITARIO NUMBER,
    ID_PROVEEDOR NUMBER,
    CONSTRAINT FK_INGREDIENTE_PROVEEDOR FOREIGN KEY (ID_PROVEEDOR) REFERENCES PROVEEDOR(ID_PROVEEDOR)
);

-- Creación de la tabla RECETA
CREATE TABLE RECETA (
    ID_RECETA NUMBER PRIMARY KEY,
    NOMBRE_RECETA VARCHAR2(100)
);

-- Creación de la tabla de union INGREDIENTE_RECETA
CREATE TABLE INGREDIENTE_RECETA (
    ID_RECETA NUMBER,
    ID_INGREDIENTE NUMBER,
    CANTIDAD NUMBER,
    CONSTRAINT FK_INGREDIENTE_RECETA_RECETA FOREIGN KEY (ID_RECETA) REFERENCES RECETA(ID_RECETA),
    CONSTRAINT FK_INGREDIENTE_RECETA_INGREDIENTE FOREIGN KEY (ID_INGREDIENTE) REFERENCES INGREDIENTE(ID_INGREDIENTE),
    CONSTRAINT CK_INGREDIENTE_RECETA_CANTIDAD CHECK (CANTIDAD > 0)
);
